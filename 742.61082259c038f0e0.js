"use strict";(self.webpackChunkmiCartera=self.webpackChunkmiCartera||[]).push([[742],{8742:(j,u,i)=>{i.r(u),i.d(u,{default:()=>E});var e=i(4438),l=i(177),d=i(5601),c=i(6463),h=i(9156),g=i(2757),b=i(3062);const m=(s,o,t)=>({"bg-green-600":s,"bg-yellow-500":o,"bg-red-600":t});function p(s,o){if(1&s&&(e.j41(0,"tr",37)(1,"td",38),e.EFF(2),e.k0s(),e.j41(3,"td",24),e.EFF(4),e.nI1(5,"currency"),e.k0s()()),2&s){const t=o.$implicit;e.R7$(2),e.JRh(t.tipo),e.R7$(2),e.JRh(e.bMT(5,2,t.valor))}}function F(s,o){if(1&s&&(e.j41(0,"tr",37)(1,"td",38),e.EFF(2),e.k0s(),e.j41(3,"td",27),e.EFF(4),e.k0s()()),2&s){const t=o.$implicit;e.R7$(2),e.JRh(t.acreedor),e.R7$(2),e.JRh(t.estado)}}function f(s,o){if(1&s&&(e.j41(0,"tr",37)(1,"td",38),e.EFF(2),e.k0s(),e.j41(3,"td",27),e.EFF(4),e.k0s()()),2&s){const t=o.$implicit;e.R7$(2),e.JRh(t.deudor),e.R7$(2),e.JRh(t.estado)}}let E=(()=>{class s{constructor(t,r,a,n,v,x){this.walletService=t,this.debtService=r,this.loanService=a,this.dateService=n,this.router=v,this.platformId=x,this.wallet=[],this.debts=[],this.loans=[],this.currentYear="",this.currentMonth="",this.saludFinanciera="positiva",this.mensajeSaludFinanciera=""}ngOnInit(){this.dateSubscription=this.dateService.selectedDate$.subscribe(({year:t,month:r})=>{t&&r&&(this.currentYear=t,this.currentMonth=r,this.loadData())})}ngOnDestroy(){this.dateSubscription?.unsubscribe()}loadData(){const t=this.currentUser;t&&(this.walletService.getWallet(t,this.currentYear,this.currentMonth).subscribe({next:r=>{this.wallet=Object.entries(r||{}).map(([a,n])=>({id:a,...n})),this.evaluarSaludFinanciera()}}),this.debtService.getDebts(t,this.currentYear,this.currentMonth).subscribe({next:r=>{this.debts=Object.entries(r||{}).map(([a,n])=>({id:a,...n})),this.evaluarSaludFinanciera()}}),this.loanService.getLoans(t,this.currentYear,this.currentMonth).subscribe({next:r=>{this.loans=Object.entries(r||{}).map(([a,n])=>({id:a,...n})),this.evaluarSaludFinanciera()}}))}get currentUser(){return(0,l.UE)(this.platformId)&&JSON.parse(localStorage.getItem("user")||"{}")?.localId||""}get totalWallet(){return this.wallet.reduce((t,r)=>t+(r.valor||0),0)}get totalPendingDebts(){return this.debts.filter(t=>"Pendiente"===t.estado).reduce((t,r)=>t+(r.valor||0),0)}get totalPendingLoans(){return this.loans.filter(t=>"Pendiente"===t.estado).reduce((t,r)=>t+(r.valor||0),0)}evaluarSaludFinanciera(){const t=this.totalWallet,r=this.totalPendingDebts+this.totalPendingLoans;t>r?(this.saludFinanciera="positiva",this.mensajeSaludFinanciera="Finanzas saludables"):t===r?(this.saludFinanciera="advertencia",this.mensajeSaludFinanciera="Presupuesto justo"):(this.saludFinanciera="critica",this.mensajeSaludFinanciera="\xa1Alerta! Tienes m\xe1s compromisos que dinero disponible")}nombreMes(t){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(t)-1]||""}irAgregarRapido(){this.router.navigate(["/app/expense"])}static#e=this.\u0275fac=function(r){return new(r||s)(e.rXU(c.F),e.rXU(h.V),e.rXU(g.a),e.rXU(b.k),e.rXU(d.Ix),e.rXU(e.Agw))};static#t=this.\u0275cmp=e.VBU({type:s,selectors:[["app-home"]],standalone:!0,features:[e.aNF],decls:89,vars:20,consts:[[1,"p-6","space-y-6"],[1,"text-xl","font-bold","text-gray-700","text-center"],[1,"flex","justify-center","mb-4"],[1,"text-white","text-sm","font-semibold","px-4","py-2","rounded-full","shadow-md",3,"ngClass"],[1,"grid","grid-cols-3","md:grid-cols-6","gap-4"],["routerLink","/app/expense",1,"flex","flex-col","items-center","bg-blue-900","text-white","p-3","rounded-lg","shadow-md","hover:bg-blue-700","transition"],[1,"fas","fa-chart-pie","text-3xl"],[1,"text-base","mt-1"],["routerLink","/app/income",1,"flex","flex-col","items-center","bg-blue-900","text-white","p-3","rounded-lg","shadow-md","hover:bg-blue-700","transition"],[1,"fas","fa-coins","text-3xl"],["routerLink","/app/wallet",1,"flex","flex-col","items-center","bg-blue-900","text-white","p-3","rounded-lg","shadow-md","hover:bg-blue-700","transition"],[1,"fas","fa-wallet","text-3xl"],["routerLink","/app/saving",1,"flex","flex-col","items-center","bg-blue-900","text-white","p-3","rounded-lg","shadow-md","hover:bg-blue-700","transition"],[1,"fas","fa-piggy-bank","text-3xl"],["routerLink","/app/loan",1,"flex","flex-col","items-center","bg-blue-900","text-white","p-3","rounded-lg","shadow-md","hover:bg-blue-700","transition"],[1,"fas","fa-hand-holding-usd","text-3xl"],["routerLink","/app/debt",1,"flex","flex-col","items-center","bg-blue-900","text-white","p-3","rounded-lg","shadow-md","hover:bg-blue-700","transition"],[1,"fas","fa-file-invoice-dollar","text-3xl"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6"],[1,"bg-white","rounded-lg","shadow-lg","p-4"],[1,"text-lg","font-semibold","text-gray-700","bg-gradient-to-r","from-green-600","to-teal-500","text-white","px-4","py-2","rounded-t-lg"],[1,"w-full","border-collapse"],[1,"bg-gray-100"],[1,"p-2","text-left"],[1,"p-2","text-right"],["class","border-b",4,"ngFor","ngForOf"],[1,"text-lg","font-semibold","text-gray-700","bg-gradient-to-r","from-red-600","to-orange-600","text-white","px-4","py-2","rounded-t-lg"],[1,"p-2","text-center"],[1,"text-lg","font-semibold","text-gray-700","bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","px-4","py-2","rounded-t-lg"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mt-6"],[1,"bg-gradient-to-r","from-green-600","to-teal-500","text-white","p-4","rounded-lg","shadow-md"],[1,"text-lg","font-semibold"],[1,"text-2xl","font-bold"],[1,"bg-gradient-to-r","from-red-600","to-orange-600","text-white","p-4","rounded-lg","shadow-md"],[1,"bg-gradient-to-r","from-blue-600","to-indigo-600","text-white","p-4","rounded-lg","shadow-md"],["title","Agregar algo r\xe1pido",1,"fixed","bottom-5","right-5","bg-blue-700","hover:bg-blue-600","text-white","text-2xl","p-4","rounded-full","shadow-lg","transition",3,"click"],[1,"fas","fa-plus"],[1,"border-b"],[1,"p-2"]],template:function(r,a){1&r&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2),e.k0s(),e.j41(3,"div",2)(4,"span",3),e.EFF(5),e.k0s()(),e.j41(6,"div",4)(7,"a",5),e.nrm(8,"i",6),e.j41(9,"span",7),e.EFF(10,"Gastos"),e.k0s()(),e.j41(11,"a",8),e.nrm(12,"i",9),e.j41(13,"span",7),e.EFF(14,"Ingresos"),e.k0s()(),e.j41(15,"a",10),e.nrm(16,"i",11),e.j41(17,"span",7),e.EFF(18,"Cartera"),e.k0s()(),e.j41(19,"a",12),e.nrm(20,"i",13),e.j41(21,"span",7),e.EFF(22,"Ahorros"),e.k0s()(),e.j41(23,"a",14),e.nrm(24,"i",15),e.j41(25,"span",7),e.EFF(26,"Pr\xe9stamos"),e.k0s()(),e.j41(27,"a",16),e.nrm(28,"i",17),e.j41(29,"span",7),e.EFF(30,"Deudas"),e.k0s()()(),e.j41(31,"div",18)(32,"div",19)(33,"h3",20),e.EFF(34," Cartera"),e.k0s(),e.j41(35,"table",21)(36,"thead")(37,"tr",22)(38,"th",23),e.EFF(39,"Dinero en"),e.k0s(),e.j41(40,"th",24),e.EFF(41,"Valor"),e.k0s()()(),e.j41(42,"tbody"),e.DNE(43,p,6,4,"tr",25),e.k0s()()(),e.j41(44,"div",19)(45,"h3",26),e.EFF(46," Deudas"),e.k0s(),e.j41(47,"table",21)(48,"thead")(49,"tr",22)(50,"th",23),e.EFF(51,"Nombre Deuda"),e.k0s(),e.j41(52,"th",27),e.EFF(53,"Estado"),e.k0s()()(),e.j41(54,"tbody"),e.DNE(55,F,5,2,"tr",25),e.k0s()()(),e.j41(56,"div",19)(57,"h3",28),e.EFF(58," Pr\xe9stamos"),e.k0s(),e.j41(59,"table",21)(60,"thead")(61,"tr",22)(62,"th",23),e.EFF(63,"Nombre Deudor"),e.k0s(),e.j41(64,"th",27),e.EFF(65,"Estado"),e.k0s()()(),e.j41(66,"tbody"),e.DNE(67,f,5,2,"tr",25),e.k0s()()()(),e.j41(68,"div",29)(69,"div",30)(70,"h3",31),e.EFF(71,"Total en Cartera"),e.k0s(),e.j41(72,"p",32),e.EFF(73),e.nI1(74,"currency"),e.k0s()(),e.j41(75,"div",33)(76,"h3",31),e.EFF(77,"Total Deudas Pendientes"),e.k0s(),e.j41(78,"p",32),e.EFF(79),e.nI1(80,"currency"),e.k0s()(),e.j41(81,"div",34)(82,"h3",31),e.EFF(83,"Total Pr\xe9stamos Pendientes"),e.k0s(),e.j41(84,"p",32),e.EFF(85),e.nI1(86,"currency"),e.k0s()()(),e.j41(87,"button",35),e.bIt("click",function(){return a.irAgregarRapido()}),e.nrm(88,"i",36),e.k0s()()),2&r&&(e.R7$(2),e.Lme(" Resumen financiero de ",a.nombreMes(a.currentMonth)," / ",a.currentYear," "),e.R7$(2),e.Y8G("ngClass",e.sMw(16,m,"positiva"===a.saludFinanciera,"advertencia"===a.saludFinanciera,"critica"===a.saludFinanciera)),e.R7$(),e.SpI(" ",a.mensajeSaludFinanciera," "),e.R7$(38),e.Y8G("ngForOf",a.wallet),e.R7$(12),e.Y8G("ngForOf",a.debts),e.R7$(12),e.Y8G("ngForOf",a.loans),e.R7$(6),e.JRh(e.bMT(74,10,a.totalWallet)),e.R7$(6),e.JRh(e.bMT(80,12,a.totalPendingDebts)),e.R7$(6),e.JRh(e.bMT(86,14,a.totalPendingLoans)))},dependencies:[l.MD,l.YU,l.Sq,l.oe,d.iI,d.Wk]})}return s})()}}]);