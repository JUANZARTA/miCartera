"use strict";(self.webpackChunkmiCartera=self.webpackChunkmiCartera||[]).push([[76],{1403:(D,u,s)=>{s.d(u,{g:()=>c});class c{constructor(n,E,_,h,i){this.acreedor=n,this.fecha_deuda=E,this.fecha_pago=_,this.valor=h,this.estado=i}}},6361:(D,u,s)=>{s.d(u,{X:()=>d,i:()=>c});var c=function(n){return n.Fijo="Fijo",n.Variable="Variables",n.Facturas="Facturas",n.Comida="Comida",n.Transporte="Transporte",n.Salud="Salud",n.Entretenimiento="Entretenimiento",n.Emergencia="Emergencia",n.Otro="Otro",n}(c||{});class d{constructor(E,_,h,i){this.descripcion=E,this.categoria=_,this.valor=h,this.estimacion=i}}},7865:(D,u,s)=>{s.d(u,{F:()=>c});class c{constructor(n,E,_,h,i){this.deudor=n,this.fecha_prestamo=E,this.fecha_pago=_,this.valor=h,this.estado=i}}},915:(D,u,s)=>{s.d(u,{f:()=>c});class c{constructor(n,E){this.tipo=n,this.valor=E}}},3062:(D,u,s)=>{s.d(u,{k:()=>P});var c=s(4438),d=s(177),n=s(4412),E=s(4572),_=s(6354),h=s(1626),i=s(4796);let P=(()=>{class t{constructor(e,o,r){if(this.http=o,this.authService=r,this.isBrowser=(0,d.UE)(e),this.isBrowser){const l=localStorage.getItem("selectedYear"),p=localStorage.getItem("selectedMonth");if(l&&p)this.yearSubject=new n.t(l),this.monthSubject=new n.t(p);else{const m=new Date,M=m.getFullYear().toString(),O=(m.getMonth()+1).toString().padStart(2,"0");localStorage.setItem("selectedYear",M),localStorage.setItem("selectedMonth",O),this.yearSubject=new n.t(M),this.monthSubject=new n.t(O)}}else this.yearSubject=new n.t(""),this.monthSubject=new n.t("")}get selectedYear$(){return this.yearSubject.asObservable()}get selectedMonth$(){return this.monthSubject.asObservable()}get selectedDate$(){return(0,E.z)([this.selectedYear$,this.selectedMonth$]).pipe((0,_.T)(([e,o])=>({year:e,month:o})))}setDate(e,o){const r=o.toString().padStart(2,"0");this.yearSubject.next(e.toString()),this.monthSubject.next(r),this.isBrowser&&(localStorage.setItem("selectedYear",e.toString()),localStorage.setItem("selectedMonth",r))}getSelectedYear(){return this.yearSubject.value}getSelectedMonth(){return this.monthSubject.value}resetToCurrentDate(){const e=new Date,o=e.getFullYear().toString(),r=(e.getMonth()+1).toString().padStart(2,"0");this.yearSubject.next(o),this.monthSubject.next(r),this.isBrowser&&(localStorage.setItem("selectedYear",o),localStorage.setItem("selectedMonth",r))}notifyMonthChange(e,o,r){const p=`Nuevo mes detectado: ${this.getMonthName(r)} ${o}`;this.authService.addNotification(e,p,"cambio_mes").subscribe()}getMonthName(e){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(e)-1]||""}static{this.\u0275fac=function(o){return new(o||t)(c.KVO(c.Agw),c.KVO(h.Qq),c.KVO(i.u))}}static{this.\u0275prov=c.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})()},9156:(D,u,s)=>{s.d(u,{V:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getDebts(t,a,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/deudas.json`).pipe((0,d.T)(r=>r||{}),(0,n.W)(r=>(console.error("[GET] Error al obtener deudas:",r),(0,c.of)({}))))}addDebt(t,a,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/deudas.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar deuda:",l),(0,c.of)(null))))}updateDebt(t,a,e,o,r){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/deudas/${o}.json`,r).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar deuda:",p),(0,c.of)(null))))}deleteDebt(t,a,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/deudas/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar deuda:",l),(0,c.of)(null))))}static{this.\u0275fac=function(a){return new(a||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},7738:(D,u,s)=>{s.d(u,{k:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getExpenses(t,a,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/gastos.json`).pipe((0,d.T)(r=>r||{}),(0,n.W)(r=>(console.error("[GET] Error al obtener gastos:",r),(0,c.of)({}))))}addExpense(t,a,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/gastos.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar gasto:",l),(0,c.of)(null))))}updateExpense(t,a,e,o,r){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/gastos/${o}.json`,r).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar gasto:",p),(0,c.of)(null))))}deleteExpense(t,a,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/gastos/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar gasto:",l),(0,c.of)(null))))}static{this.\u0275fac=function(a){return new(a||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},402:(D,u,s)=>{s.d(u,{q:()=>h});var c=s(4438),d=s(4497),n=s(7738),E=s(6463),_=s(2757);let h=(()=>{class i{constructor(){this.incomeService=(0,c.WQX)(d.H),this.expenseService=(0,c.WQX)(n.k),this.walletService=(0,c.WQX)(E.F),this.loansService=(0,c.WQX)(_.a)}mostrarEstadoFinanciero(t,a,e,o){const r=this.incomeService.getIncomes(a,e,o),l=this.expenseService.getExpenses(a,e,o),p=this.walletService.getWallet(a,e,o),m=this.loansService.getLoans(a,e,o);r.subscribe(M=>{const O=Object.values(M||{});l.subscribe(I=>{const B=Object.values(I||{});p.subscribe(T=>{const R=Object.values(T||{});m.subscribe(L=>{const f=Object.values(L||{}),g=O.reduce((S,$)=>S+($.valor||0),0),v=B.reduce((S,$)=>S+($.valor||0),0),j=R.reduce((S,$)=>S+($.valor||0),0),U=f.reduce((S,$)=>S+($.valor||0),0),W=(R.reduce((S,$)=>S+($.valor||0),0),f.filter(S=>"Pagado"!==S.estado).reduce((S,$)=>S+($.valor||0),0)),A=j+U-(g-v);A>0?(t.estadoFinanciero=`Tienes ${this.formatCurrency(A)} sin justificar. Puede ser un ingreso no registrado.`,t.estadoFinancieroColor="azul"):A<0?(t.estadoFinanciero=`Tienes un descuadre de ${this.formatCurrency(Math.abs(A))}. Revisa tus ingresos, gastos o cartera.`,t.estadoFinancieroColor="rojo"):(t.estadoFinanciero="Tus cuentas est\xe1n al d\xeda. Todo cuadra perfectamente.",t.estadoFinancieroColor="verde"),t.cuadreDescuadre=A,t.estimacionGastosMes=B.reduce((S,$)=>S+($.estimacion||0),0),t.estimacionDineroRestanteMes=g-t.estimacionGastosMes,t.gastadoActualmente=v,t.restanteActualmente=g-v-W,t.restanteTotal=g-v,t.diferenciaSaldo=t.estimacionDineroRestanteMes-t.restanteActualmente})})})})}formatCurrency(t){return new Intl.NumberFormat("es-EC").format(t)}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},4497:(D,u,s)=>{s.d(u,{H:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getIncomes(t,a,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/ingresos.json`).pipe((0,d.T)(r=>r||{}),(0,n.W)(r=>(console.error("[GET] Error al obtener ingresos:",r),(0,c.of)({}))))}addIncome(t,a,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/ingresos.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar ingreso:",l),(0,c.of)(null))))}updateIncome(t,a,e,o,r){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/ingresos/${o}.json`,r).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar ingreso:",p),(0,c.of)(null))))}deleteIncome(t,a,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/ingresos/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar ingreso:",l),(0,c.of)(null))))}static{this.\u0275fac=function(a){return new(a||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},2757:(D,u,s)=>{s.d(u,{a:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getLoans(t,a,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/prestamos.json`).pipe((0,d.T)(r=>r||{}),(0,n.W)(r=>(console.error("[GET] Error al obtener pr\xe9stamos:",r),(0,c.of)({}))))}addLoan(t,a,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/prestamos.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar pr\xe9stamo:",l),(0,c.of)(null))))}updateLoan(t,a,e,o,r){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/prestamos/${o}.json`,r).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar pr\xe9stamo:",p),(0,c.of)(null))))}deleteLoan(t,a,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/prestamos/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar pr\xe9stamo:",l),(0,c.of)(null))))}static{this.\u0275fac=function(a){return new(a||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},6463:(D,u,s)=>{s.d(u,{F:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getWallet(t,a,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/cartera.json`).pipe((0,d.T)(r=>r||{}),(0,n.W)(r=>(console.error("[GET] Error al obtener cartera:",r),(0,c.of)({}))))}addAccount(t,a,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/cartera.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar cuenta:",l),(0,c.of)(null))))}updateAccount(t,a,e,o,r){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/cartera/${o}.json`,r).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar cuenta:",p),(0,c.of)(null))))}deleteAccount(t,a,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${a}/${e}/cartera/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar cuenta:",l),(0,c.of)(null))))}static{this.\u0275fac=function(a){return new(a||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);