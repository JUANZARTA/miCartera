"use strict";(self.webpackChunkmiCartera=self.webpackChunkmiCartera||[]).push([[76],{1403:(D,u,s)=>{s.d(u,{g:()=>c});class c{constructor(n,E,_,h,i){this.acreedor=n,this.fecha_deuda=E,this.fecha_pago=_,this.valor=h,this.estado=i}}},6361:(D,u,s)=>{s.d(u,{X:()=>d,i:()=>c});var c=function(n){return n.Fijo="Fijo",n.Variable="Variables",n.Facturas="Facturas",n.Comida="Comida",n.Transporte="Transporte",n.Salud="Salud",n.Entretenimiento="Entretenimiento",n.Emergencia="Emergencia",n.Otro="Otro",n}(c||{});class d{constructor(E,_,h,i){this.descripcion=E,this.categoria=_,this.valor=h,this.estimacion=i}}},7865:(D,u,s)=>{s.d(u,{F:()=>c});class c{constructor(n,E,_,h,i){this.deudor=n,this.fecha_prestamo=E,this.fecha_pago=_,this.valor=h,this.estado=i}}},915:(D,u,s)=>{s.d(u,{f:()=>c});class c{constructor(n,E){this.tipo=n,this.valor=E}}},3062:(D,u,s)=>{s.d(u,{k:()=>i});var c=s(4438),d=s(177),n=s(4412),E=s(4572),_=s(6354),h=s(1626);let i=(()=>{class g{constructor(r,e){if(this.http=e,this.isBrowser=(0,d.UE)(r),this.isBrowser){const o=localStorage.getItem("selectedYear"),a=localStorage.getItem("selectedMonth");if(o&&a)this.yearSubject=new n.t(o),this.monthSubject=new n.t(a);else{const l=new Date,p=l.getFullYear().toString(),A=(l.getMonth()+1).toString().padStart(2,"0");localStorage.setItem("selectedYear",p),localStorage.setItem("selectedMonth",A),this.yearSubject=new n.t(p),this.monthSubject=new n.t(A)}}else this.yearSubject=new n.t(""),this.monthSubject=new n.t("")}get selectedYear$(){return this.yearSubject.asObservable()}get selectedMonth$(){return this.monthSubject.asObservable()}get selectedDate$(){return(0,E.z)([this.selectedYear$,this.selectedMonth$]).pipe((0,_.T)(([r,e])=>({year:r,month:e})))}setDate(r,e){const o=e.toString().padStart(2,"0");this.yearSubject.next(r.toString()),this.monthSubject.next(o),this.isBrowser&&(localStorage.setItem("selectedYear",r.toString()),localStorage.setItem("selectedMonth",o))}getSelectedYear(){return this.yearSubject.value}getSelectedMonth(){return this.monthSubject.value}resetToCurrentDate(){const r=new Date,e=r.getFullYear().toString(),o=(r.getMonth()+1).toString().padStart(2,"0");this.yearSubject.next(e),this.monthSubject.next(o),this.isBrowser&&(localStorage.setItem("selectedYear",e),localStorage.setItem("selectedMonth",o))}notifyMonthChange(r,e,o){const p=`https://micartera-acd5b-default-rtdb.firebaseio.com/${r}/notificaciones.json`,A={mensaje:`Nuevo mes detectado: ${this.getMonthName(o)} ${e}`,leido:!1,fecha:(new Date).toLocaleString()};this.http.post(p,A).subscribe()}getMonthName(r){return["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][parseInt(r)-1]||""}static{this.\u0275fac=function(e){return new(e||g)(c.KVO(c.Agw),c.KVO(h.Qq))}}static{this.\u0275prov=c.jDH({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()},9156:(D,u,s)=>{s.d(u,{V:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getDebts(t,r,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/deudas.json`).pipe((0,d.T)(a=>a||{}),(0,n.W)(a=>(console.error("[GET] Error al obtener deudas:",a),(0,c.of)({}))))}addDebt(t,r,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/deudas.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar deuda:",l),(0,c.of)(null))))}updateDebt(t,r,e,o,a){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/deudas/${o}.json`,a).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar deuda:",p),(0,c.of)(null))))}deleteDebt(t,r,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/deudas/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar deuda:",l),(0,c.of)(null))))}static{this.\u0275fac=function(r){return new(r||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},7738:(D,u,s)=>{s.d(u,{k:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getExpenses(t,r,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/gastos.json`).pipe((0,d.T)(a=>a||{}),(0,n.W)(a=>(console.error("[GET] Error al obtener gastos:",a),(0,c.of)({}))))}addExpense(t,r,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/gastos.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar gasto:",l),(0,c.of)(null))))}updateExpense(t,r,e,o,a){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/gastos/${o}.json`,a).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar gasto:",p),(0,c.of)(null))))}deleteExpense(t,r,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/gastos/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar gasto:",l),(0,c.of)(null))))}static{this.\u0275fac=function(r){return new(r||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},402:(D,u,s)=>{s.d(u,{q:()=>h});var c=s(4438),d=s(4497),n=s(7738),E=s(6463),_=s(2757);let h=(()=>{class i{constructor(){this.incomeService=(0,c.WQX)(d.H),this.expenseService=(0,c.WQX)(n.k),this.walletService=(0,c.WQX)(E.F),this.loansService=(0,c.WQX)(_.a)}mostrarEstadoFinanciero(t,r,e,o){const a=this.incomeService.getIncomes(r,e,o),l=this.expenseService.getExpenses(r,e,o),p=this.walletService.getWallet(r,e,o),A=this.loansService.getLoans(r,e,o);a.subscribe(v=>{const P=Object.values(v||{});l.subscribe(I=>{const f=Object.values(I||{});p.subscribe(T=>{const B=Object.values(T||{});A.subscribe(L=>{const R=Object.values(L||{}),M=P.reduce(($,S)=>$+(S.valor||0),0),O=f.reduce(($,S)=>$+(S.valor||0),0),j=B.reduce(($,S)=>$+(S.valor||0),0),U=R.reduce(($,S)=>$+(S.valor||0),0),W=(B.reduce(($,S)=>$+(S.valor||0),0),R.filter($=>"Pagado"!==$.estado).reduce(($,S)=>$+(S.valor||0),0)),m=j+U-(M-O);m>0?(t.estadoFinanciero=`Tienes ${this.formatCurrency(m)} sin justificar. Puede ser un ingreso no registrado.`,t.estadoFinancieroColor="azul"):m<0?(t.estadoFinanciero=`Tienes un descuadre de ${this.formatCurrency(Math.abs(m))}. Revisa tus ingresos, gastos o cartera.`,t.estadoFinancieroColor="rojo"):(t.estadoFinanciero="Tus cuentas est\xe1n al d\xeda. Todo cuadra perfectamente.",t.estadoFinancieroColor="verde"),t.cuadreDescuadre=m,t.estimacionGastosMes=f.reduce(($,S)=>$+(S.estimacion||0),0),t.estimacionDineroRestanteMes=M-t.estimacionGastosMes,t.gastadoActualmente=O,t.restanteActualmente=M-O-W,t.restanteTotal=M-O,t.diferenciaSaldo=t.estimacionDineroRestanteMes-t.restanteActualmente})})})})}formatCurrency(t){return new Intl.NumberFormat("es-EC").format(t)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275prov=c.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},4497:(D,u,s)=>{s.d(u,{H:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getIncomes(t,r,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/ingresos.json`).pipe((0,d.T)(a=>a||{}),(0,n.W)(a=>(console.error("[GET] Error al obtener ingresos:",a),(0,c.of)({}))))}addIncome(t,r,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/ingresos.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar ingreso:",l),(0,c.of)(null))))}updateIncome(t,r,e,o,a){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/ingresos/${o}.json`,a).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar ingreso:",p),(0,c.of)(null))))}deleteIncome(t,r,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/ingresos/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar ingreso:",l),(0,c.of)(null))))}static{this.\u0275fac=function(r){return new(r||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},2757:(D,u,s)=>{s.d(u,{a:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getLoans(t,r,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/prestamos.json`).pipe((0,d.T)(a=>a||{}),(0,n.W)(a=>(console.error("[GET] Error al obtener pr\xe9stamos:",a),(0,c.of)({}))))}addLoan(t,r,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/prestamos.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar pr\xe9stamo:",l),(0,c.of)(null))))}updateLoan(t,r,e,o,a){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/prestamos/${o}.json`,a).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar pr\xe9stamo:",p),(0,c.of)(null))))}deleteLoan(t,r,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/prestamos/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar pr\xe9stamo:",l),(0,c.of)(null))))}static{this.\u0275fac=function(r){return new(r||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()},6463:(D,u,s)=>{s.d(u,{F:()=>h});var c=s(7673),d=s(6354),n=s(9437),E=s(4438),_=s(1626);let h=(()=>{class i{constructor(t){this.http=t,this.FIREBASE_BASE_URL="https://micartera-acd5b-default-rtdb.firebaseio.com"}getWallet(t,r,e){return this.http.get(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/cartera.json`).pipe((0,d.T)(a=>a||{}),(0,n.W)(a=>(console.error("[GET] Error al obtener cartera:",a),(0,c.of)({}))))}addAccount(t,r,e,o){return this.http.post(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/cartera.json`,o).pipe((0,n.W)(l=>(console.error("[POST] Error al agregar cuenta:",l),(0,c.of)(null))))}updateAccount(t,r,e,o,a){return this.http.put(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/cartera/${o}.json`,a).pipe((0,n.W)(p=>(console.error("[PUT] Error al actualizar cuenta:",p),(0,c.of)(null))))}deleteAccount(t,r,e,o){return this.http.delete(`${this.FIREBASE_BASE_URL}/${t}/${r}/${e}/cartera/${o}.json`).pipe((0,n.W)(l=>(console.error("[DELETE] Error al eliminar cuenta:",l),(0,c.of)(null))))}static{this.\u0275fac=function(r){return new(r||i)(E.KVO(_.Qq))}}static{this.\u0275prov=E.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}}]);